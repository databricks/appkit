---
sidebar_position: 2
---

# Charts

AppKit provides production-ready chart components built on Apache ECharts with integrated query execution.

## Available Chart Components

- `BarChart`
- `LineChart`
- `AreaChart`
- `PieChart`
- `DonutChart`
- `HeatmapChart`
- `ScatterChart`
- `RadarChart`

## Query Mode vs Data Mode

All charts support two modes:

- **Query mode**: `queryKey` + `parameters` (fetches from backend)
- **Data mode**: `data` (inline JSON, no server)

## Avoid Double-Fetching

Don't fetch the same query twice:

```tsx
// ❌ Wrong: fetches the same query twice
// const { data } = useAnalyticsQuery("spend_data", params);
// return <LineChart queryKey="spend_data" parameters={params} />;

// ✅ Correct: let the chart fetch
return <LineChart queryKey="spend_data" parameters={params} />;
```

## Query Mode Example

Recommended for Databricks-backed analytics:

```tsx
import { LineChart } from "@databricks/appkit-ui/react";
import { sql } from "@databricks/appkit-ui/js";
import { useMemo } from "react";

export function SpendChart() {
  const params = useMemo(
    () => ({
      startDate: sql.date("2024-01-01"),
      endDate: sql.date("2024-12-31"),
      aggregationLevel: sql.string("day"),
    }),
    [],
  );

  return (
    <LineChart
      queryKey="spend_data"
      parameters={params}
      format="auto"      // "auto" | "json" | "arrow"
      xKey="period"
      yKey="cost_usd"
      smooth
      showSymbol={false}
    />
  );
}
```

## Chart Props Reference

Charts are **self-contained ECharts components**. Configure via props, NOT children.

### Common Props

```tsx
// ✅ Correct: use props for customization
<BarChart
  queryKey="sales_by_region"
  parameters={{}}
  xKey="region"                    // X-axis field
  yKey={["revenue", "expenses"]}   // Y-axis field(s) - string or string[]
  colors={['#40d1f5', '#4462c9']}  // Custom colors
  stacked                          // Stack bars (BarChart, AreaChart)
  orientation="horizontal"         // "vertical" (default) | "horizontal"
  showLegend                       // Show legend
  height={400}                     // Height in pixels (default: 300)
/>

<LineChart
  queryKey="trend_data"
  parameters={{}}
  xKey="date"
  yKey="value"
  smooth                           // Smooth curves (default: true)
  showSymbol={false}               // Hide data point markers
/>
```

### Format Selection

- `format="auto"` - Automatically selects JSON or Arrow based on query characteristics (recommended)
- `format="json"` - Force JSON format
- `format="arrow"` - Force Arrow format for better performance with large datasets

## CRITICAL: Charts Are NOT Recharts Wrappers

AppKit charts are built on ECharts, not Recharts. Do not use Recharts components as children:

```tsx
// ❌ WRONG - AppKit charts are NOT Recharts wrappers
import { BarChart } from "@databricks/appkit-ui/react";
import { Bar, XAxis, YAxis, CartesianGrid } from "recharts";

<BarChart queryKey="data" parameters={{}}>
  <CartesianGrid />  // ❌ This will cause TypeScript errors
  <XAxis dataKey="x" />  // ❌ Not supported
  <Bar dataKey="y" />  // ❌ Not supported
</BarChart>

// ✅ CORRECT - use props instead
<BarChart
  queryKey="data"
  parameters={{}}
  xKey="x"
  yKey="y"
/>
```

## Multiple Series Example

Charts can display multiple data series:

```tsx
<BarChart
  queryKey="revenue_comparison"
  parameters={{}}
  xKey="quarter"
  yKey={["revenue_2023", "revenue_2024"]}
  colors={['#3b82f6', '#10b981']}
  showLegend
/>
```

## Data Mode Example

For static or client-side data:

```tsx
<LineChart
  data={[
    { month: "Jan", sales: 100 },
    { month: "Feb", sales: 150 },
    { month: "Mar", sales: 200 },
  ]}
  xKey="month"
  yKey="sales"
/>
```

## See Also

- [Usage Guide](./usage-guide.mdx) - Hooks and utilities
- [Component Patterns](./component-patterns.mdx) - UI composition patterns
